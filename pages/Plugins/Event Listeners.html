<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Event Listeners | @skeldjs/hindenburg</title>
	<meta name="description" content="Documentation for @skeldjs/hindenburg">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../assets/css/main.css">
	<link rel="stylesheet" href="../../assets/css/pages.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../../assets/js/search.json" data-base="../..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../../index.html" class="title">@skeldjs/hindenburg</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../../modules.html">Globals</a>
				</li>
				<li>
					<a href="Creating a Plugin.html">Plugins</a>
				</li>
				<li>
					<a href="Event Listeners.html">Event Listeners</a>
				</li>
			</ul>
			<h1>Event Listeners</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p>One of the most central components to writing a plugin for Hindenburg is the ability to listen for specific events from rooms or from the worker.</p>
				<a href="#attaching-listeners" id="attaching-listeners" style="color: inherit; text-decoration: none;">
					<h2>Attaching Listeners</h2>
				</a>
				<p>As with every other Hindenburg plugin design decisions; you can attach event listeners with the <a href="../../modules.html#EventListener"><code>@EventListener</code></a> decorator.</p>
				<p>For example:</p>
				<pre><code class="language-ts"><span style="color: #000000">@</span><span style="color: #795E26">HindenburgPlugin</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hbplugin-fun-things&quot;</span><span style="color: #000000">)</span>
<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">MyPlugin</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #267F99">RoomPlugin</span><span style="color: #000000"> {</span>
<span style="color: #000000">    @</span><span style="color: #795E26">EventListener</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;player.setcolor&quot;</span><span style="color: #000000">)</span>
<span style="color: #000000">    </span><span style="color: #795E26">onPlayerSetColor</span><span style="color: #000000">(</span><span style="color: #001080">ev</span><span style="color: #000000">: </span><span style="color: #267F99">PlayerSetColorEvent</span><span style="color: #000000">&lt;</span><span style="color: #267F99">Room</span><span style="color: #000000">&gt;) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">info</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Player %s set their color to %s&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">ev</span><span style="color: #000000">.</span><span style="color: #001080">player</span><span style="color: #000000">, </span><span style="color: #001080">Color</span><span style="color: #000000">[</span><span style="color: #001080">ev</span><span style="color: #000000">.</span><span style="color: #001080">newColor</span><span style="color: #000000">]);</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>
</code></pre>
				<blockquote>
					<p>You can access every symbol, <code>EventListener</code>, <code>PlayerSetColorEvent</code> and <code>Color</code> via the <code>@skeldjs/hindenburg</code> package.</p>
				</blockquote>
				<p>Many (not all) events will allow you to cancel what would normally happen, or allow you to revert any changes that the event made. Most events also allow you to change data, for example the <a href="https://skeld.js.org/classes/core.RoomAssignRolesEvent.html"><code>room.assignroles</code></a> event allows you to modify the roles that will be assigned to players when the game starts.</p>
				<p>Some events will also wait for any asynchronous tasks to complete.</p>
				<blockquote>
					<p>Be careful what you do in certain events. The <a href="https://skeld.js.org/classes/core.RoomFixedUpdateEvent.html"><code>room.fixedupdate</code></a> event, for example, can significantly slow down your server if handlers for this event take too long.</p>
				</blockquote>
				<p>If you&#39;re writing a room plugin, only events emitted from <em>that</em> room will be listened to. Events attached to rooms or to the worker will be detached if your plugin is unloaded.</p>
				<a href="#typescript" id="typescript" style="color: inherit; text-decoration: none;">
					<h2>TypeScript</h2>
				</a>
				<p>If you&#39;re working in TypeScript, due to a <a href="https://github.com/Microsoft/TypeScript/issues/4881">long-standing issue</a>, you must specify the type of the event, making it slightly more verbose, i.e. <code>ev: PlayerSendChatEvent&lt;Room&gt;</code>.</p>
				<p>However, Hindenburg allows you to use this to your advantage, as you can omit the event name entirely from the <code>@EventListener()</code> decorator, thanks to TypeScript&#39;s ability to emit type metadata for decorators. For example, you could instead do:</p>
				<pre><code class="language-ts"><span style="color: #000000">@</span><span style="color: #795E26">EventListener</span><span style="color: #000000">()</span>
<span style="color: #795E26">onPlayerSetColor</span><span style="color: #000000">(</span><span style="color: #001080">ev</span><span style="color: #000000">: </span><span style="color: #001080">PlayerSetColorEvent</span><span style="color: #000000">&lt;</span><span style="color: #001080">Room</span><span style="color: #000000">&gt;) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">logger</span><span style="color: #000000">.</span><span style="color: #795E26">info</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Player %s set their color to %s&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">ev</span><span style="color: #000000">.</span><span style="color: #001080">player</span><span style="color: #000000">, </span><span style="color: #001080">Color</span><span style="color: #000000">[</span><span style="color: #001080">ev</span><span style="color: #000000">.</span><span style="color: #001080">newColor</span><span style="color: #000000">]);</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#events-to-listen-for" id="events-to-listen-for" style="color: inherit; text-decoration: none;">
					<h2>Events to Listen for</h2>
				</a>
				<p>As Hindenburg is based upon <a href="https://skeld.js.org">skeldjs</a>, it naturally inherits every event, which you can <a href="https://skeld.js.org/pages/Information/Events.html#event-list">view here</a>.</p>
				<p>Hindenburg also adds a few more events, and modifies some skeldjs ones:</p>
				<a href="#clients" id="clients" style="color: inherit; text-decoration: none;">
					<h3>Clients</h3>
				</a>
				<ul>
					<li><a href="../../classes/ClientBanEvent.html"><code>client.ban</code></a></li>
					<li><a href="../../classes/ClientBroadcastEvent.html"><code>client.broadcast</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>client.connect</code></a></li>
				</ul>
				<a href="#rooms" id="rooms" style="color: inherit; text-decoration: none;">
					<h3>Rooms</h3>
				</a>
				<ul>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.beforecreate</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.beforedestroy</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.create</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.destroy</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.gameend</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.gamestart</code></a></li>
					<li><a href="../../classes/ClientConnectEvent.html"><code>room.selecthost</code></a></li>
				</ul>
				<a href="#worker" id="worker" style="color: inherit; text-decoration: none;">
					<h3>Worker</h3>
				</a>
				<ul>
					<li><a href="../../classes/WorkerBeforeJoinEvent.html"><code>worker.beforejoin</code></a></li>
					<li><a href="../../classes/WorkerGetGameListEvent.html"><code>worker.getgamelist</code></a></li>
					<li><a href="../../classes/WorkerImportPluginEvent.html"><code>worker.importplugin</code></a></li>
					<li><a href="../../classes/WorkerLoadPluginEvent.html"><code>worker.loadplugin</code></a></li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="label pp-nav pp-group">
						<span>Getting <wbr>Started</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Installation.html">Installation</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Environment Variables.html">Environment <wbr>Variables</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Configuration.html">Configuration</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Installing Plugins.html">Installing <wbr>Plugins</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Contributing.html">Contributing</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Getting Started/Comparison with Impostor.html">Comparison with <wbr>Impostor</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Using <wbr>Hindenburg</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Using Hindenburg/Chat Commands.html">Chat <wbr>Commands</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Using Hindenburg/Logging Config.html">Logging <wbr>Config</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Using Hindenburg/Reactor Support.html">Reactor <wbr>Support</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Using Hindenburg/Server-as-a-Host.html">Server-<wbr>as-<wbr>a-<wbr>Host</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Using Hindenburg/Server-as-a-Host.html">Interactive CLI</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Advanced <wbr>Usage</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Advanced Usage/Unknown Innernet Objects.html">Unknown <wbr>Innernet <wbr>Objects</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Advanced Usage/Message Ordering.html">Message <wbr>Ordering</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Plugins</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Creating a Plugin.html">Creating a <wbr>Plugin</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Developing Plugins.html">Developing <wbr>Plugins</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Compatible Hindenburg API Versions.html">Compatible <wbr>Hindenburg API <wbr>Versions</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Publishing Plugins.html">Publishing <wbr>Plugins</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Load Ordering.html">Load <wbr>Ordering</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Worker and Room Plugins.html">Worker and <wbr>Room <wbr>Plugins</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Dependencies.html">Dependencies</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Lifecycle Methods.html">Lifecycle <wbr>Methods</a>
					</li>
					<li class="current pp-nav pp-page">
						<a href="Event Listeners.html">Event <wbr>Listeners</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Receiving Protocol Messages.html">Receiving <wbr>Protocol <wbr>Messages</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Chat Commands.html">Chat <wbr>Commands</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Player Perspectives.html">Player <wbr>Perspectives</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Event Targets.html">Event <wbr>Targets</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Reactor Integration.html">Reactor <wbr>Integration</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="End Game Intents.html">End <wbr>Game <wbr>Intents</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Server Broadcast.html">Server <wbr>Broadcast</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="CLI Commands.html">CLI <wbr>Commands</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Custom Roles.html">Custom <wbr>Roles</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Custom Innernet Objects.html">Custom <wbr>Innernet <wbr>Objects</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Custom Protocol Messages.html">Custom <wbr>Protocol <wbr>Messages</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="Game Codes.html">Game <wbr>Codes</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Advanced <wbr>Topics</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Advanced Topics/Object Ownership Guards.html">Object <wbr>Ownership <wbr>Guards</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>Guides</span>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Guides/New Roles.html">New <wbr>Roles</a>
					</li>
					<li class=" pp-nav pp-page">
						<a href="../Guides/Floating Text.html">Floating <wbr>Text</a>
					</li>
					<li class="label pp-nav pp-group">
						<span>API</span>
					</li>
					<li class=" ">
						<a href="../../modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../../assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="../../assets/js/search.json"><' + '/script>');</script>
</body>
</html>